scalar DateTime
scalar JSON

type PageInfo {
  hasNextPage: Boolean!
  endCursor: ID
}

type GraphScope {
  orgId: String!
  projectId: String
}

type GraphNode {
  id: ID!
  entityType: String!       # 'ticket', 'pr', 'doc', 'user'
  displayName: String!
  sourceSystem: String      # 'jira', 'github', 'notion'
  canonicalPath: String     # 'PROJ-123', 'owner/repo'
  properties: JSON!         # Type-specific fields (status, priority)
  edges(type: String, direction: String, limit: Int): [GraphEdge!]!
  scope: GraphScope!
}

type GraphEdge {
  id: ID!
  edgeType: String!         # 'BLOCKS', 'OWNS', 'DOCUMENTS'
  target: GraphNode!
  metadata: JSON
}

type SearchResult {
  node: GraphNode!
  score: Float
  highlights: [String!]
}

input SearchFilters {
  entityTypes: [String!]
  projects: [String!]
}

type ActionResult {
  success: Boolean!
  message: String
  updatedNode: GraphNode
}

type Query {
  search(query: String!, filters: SearchFilters, limit: Int): [SearchResult!]!
  entity(id: ID!): GraphNode
  entityBySource(system: String!, key: String!): GraphNode
}

type Mutation {
  executeAction(nodeId: ID!, verb: String!, payload: JSON!): ActionResult!
}
